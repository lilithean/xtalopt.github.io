<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Zackary Falls">
  <meta name="generator" content="Doxygen 1.8.9.1"/>
  <meta name="description" content="Github Page for XtalOpt, an evolutionary algortihm designed to predict crystal structures.">
  <link rel="icon" href="../../img/xtalopt-logo.png">
  <title>XtalOpt - API:Angle correction in XtalOpt</title>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="search/searchdata.js"></script>
  <script type="text/javascript" src="search/search.js"></script>
  <script type="text/javascript">
    $(document).ready(function() { init_search(); });
  </script>
<!-- Le styles -->
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <link href="../../dist/css/bootstrap.css" rel="stylesheet">
  <link href="../../dist/css/bootstrap-responsive.css" rel="stylesheet">
  <link href="../../static/style-justified.css" rel="stylesheet">
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<!-- Fav and touch icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../img/xtalopt-logo.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../img/xtalopt-logo.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../img/xtalopt-logo.png">
  <link rel="apple-touch-icon-precomposed" href="../../img/xtalopt-logo.png">
  <link rel="shortcut icon" href="../../img/xtalopt-logo.png">
</head>
<body>
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <div class="nav">
          <ul class="nav navbar-center">
            <li><a class="brand" href="../../index.html"><img src="../../img/xtalopt-logo.png" width="25px"></a></li>
            <li><a href="../../download.html">Downloads</a></li>
            <li><a href="../../install.html">Installation</a></li>
            <li><a href="../../pub.html">Publications</a></li>
            <li class="active"><a href="annotated.html">API</a></li>
            <li><a href="../../tut.html">Tutorial</a></li>
            <li><a href="../../contact.html">Contact</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <br>
      <br>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Angle correction in XtalOpt </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="fixAngles.png" alt="fixAngles.png"/>
<div class="caption">
Example of the angle correction transformation in two dimensions</div></div>
<p> Prior to optimization, the structure's lattice is adjusted so that all angles are between <img class="formulaInl" alt="$60^\circ$" src="form_0.png"/> and <img class="formulaInl" alt="$120^\circ$" src="form_1.png"/>; by a process similar to that described by Oganov et al. in their 2008 paper. The following transformations are applied to all combinations of the three lattice vectors:</p>
<p>If both conditions </p><p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray} \left| \arccos\left(\frac{\vec{v_i}\cdot \vec{v_j}} {||\vec{v_i}||\,||\vec{v_j}||} \right) - \pi \right| &amp;> \frac{\pi}{3} \mbox{\ ,\ and\ } ||\vec{v_i}|| &amp;\geq ||\vec{v_j}|| \end{eqnarray}" src="form_2.png"/>
</p>
<p>are true, the cell should be transformed. To do this, the vector <img class="formulaInl" alt="$\vec{v_i}$" src="form_3.png"/> is replaced by the vector <img class="formulaInl" alt="$\vec{v_i'}$" src="form_4.png"/>, defined as</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ \vec{v_i'} = \vec{v_i} - \mbox{ceil}\left(\left|\frac{\vec{v_i}\cdot \vec{v_j}} {||\vec{v_j}||^2}\right|\right)\mbox{sign}(\vec{v_i}\cdot \vec{v_j})\vec{v_j} \]" src="form_5.png"/>
</p>
<p>This transformation adds a vector <img class="formulaInl" alt="$\vec{a} = \pm n \vec{v_j}$" src="form_6.png"/> that is parallel to <img class="formulaInl" alt="$\vec{v_j}$" src="form_7.png"/> with length that is an integer multiple of <img class="formulaInl" alt="$||\vec{v_j}||$" src="form_8.png"/>. The multiplier <img class="formulaInl" alt="$n$" src="form_9.png"/> is defined as the next highest integer from the absolute value of the scalar projection of <img class="formulaInl" alt="$\vec{v_i}$" src="form_3.png"/> on <img class="formulaInl" alt="$\vec{v_j}$" src="form_7.png"/> divided by the length of <img class="formulaInl" alt="$\vec{v_j}$" src="form_7.png"/> <img class="formulaInl" alt="$n = \mbox{ceil}\left(\left(\left|\,\vec{v_i}\cdot \vec{v_j}/ ||\vec{v_j}||\,\right|\right)/||\vec{v_j}||\right)$" src="form_10.png"/>)}. The sign of <img class="formulaInl" alt="$n\vec{v_j}$" src="form_11.png"/> from is determined by <img class="formulaInl" alt="$-\mbox{sign}(\vec{v_i}\cdot\vec{v_j})$" src="form_12.png"/>, resulting in the transformation equation above. For clarification, see the preceeding image.</p>
<p>These equations differ somewhat from those provided by Oganov et al., since the above equations apply to arbitrary length vectors, while those published for Oganov's USPEX code seem to only be applicable to unit vectors.</p>
<p>Atomic coordinates are stored in Cartesian form before the lattice transformation to maintain the structure's atomic configuration. After the new angles are set, the atoms are adjusted so that they lie within the new cell by adding or subtracting 1 from the new fractional coordinates. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 10 2015 16:01:03 for GlobalSearch by<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
